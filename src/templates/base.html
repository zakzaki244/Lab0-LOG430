<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Système POS Web</title>
<style>
body {
    font-family: 'Segoe UI', Arial, sans-serif;
    margin: 0;
    background: #f5f6fa;
    color: #222;
}
.nav {
    background: #304ffe;
    padding: 1em 2em;
    margin-bottom: 2em;
}
.nav a {
    margin-right: 2em;
    text-decoration: none;
    color: #fff;
    font-weight: bold;
    font-size: 1.1em;
    transition: color .2s;
}
.nav a:hover {
    color: #ffd600;
}
.flash {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
    padding: 0.8em 1em;
    margin: 1em 0;
    border-radius: 5px;
}
.session {
    margin-bottom: 1em;
    font-size: 0.97em;
}
h2 {
    color: #304ffe;
    letter-spacing: .01em;
}
table {
    width: 95%;
    border-collapse: collapse;
    margin: 1em 0;
    background: #fff;
    box-shadow: 0 1px 6px #0001;
}
th, td {
    padding: 0.7em 1em;
    border: 1px solid #dde1e7;
    text-align: left;
}
th {
    background: #e3e8fd;
    color: #26306e;
    font-size: 1.03em;
}
input[type=text], input[type=number], select {
    padding: 0.4em 0.7em;
    margin: 0 0.15em;
    border: 1px solid #c1c1c1;
    border-radius: 3px;
    font-size: 1em;
    background: #f5f6fa;
}
button {
    background: #304ffe;
    color: #fff;
    border: none;
    padding: 0.5em 1.1em;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
    transition: background .2s;
    margin-left: .3em;
}
button:hover {
    background: #1a237e;
}
button[style*="color:red;"] {
    background: #fff0f0;
    color: #e53935 !important;
    border: 1px solid #e53935;
}
button[style*="color:red;"]:hover {
    background: #e53935;
    color: #fff !important;
}
form {
    display: inline;
}
</style>
</head>
<body>
    <div class="nav">
    <a href="{{ url_for('index') }}">Accueil</a>
    {% if session.role == "gestionnaire" %}
    <a href="{{ url_for('dashboard') }}">Tableau de bord</a>
    {% endif %}
    {% if session.role == "logistique" %}
    <a href="{{ url_for('demande_reappro') }}">Demandes de réappro</a>
    {% endif %}
    {% if session.role != "employe" %}
    <a href="{{ url_for('manage_products') }}">Gérer les produits</a>
    {% endif %}
    <a href="{{ url_for('magasins') }}">Magasins</a>
    {% if centre_id %}
    <a href="{{ url_for('store_stock', store_id=centre_id) }}">Centre logistique</a>
    {% endif %}
    <a href="{{ url_for('search') }}">Rechercher produit</a>
    {% if session.role == "employe" %}
        <a href="{{ url_for('stock') }}">Voir le stock</a>
    {% else %}
        <a href="{{ url_for('magasins') }}">Stocks magasins</a>
    {% endif %}
    <a href="{{ url_for('sale') }}">Nouvelle vente</a>
    <a href="{{ url_for('refund') }}">Annuler vente</a>
    {% if session.role == "gestionnaire" %}
        <a href="{{ url_for('rapport') }}">Rapport consolidé</a>
    {% endif %}
    <a href="{{ url_for('login') }}">Se connecter</a>
</div>
    <div class="session">
        {% if session.username %}
          Connecté en tant que <b>{{ session.username }}</b> ({{ session.role }}) — <a href="{{ url_for('logout') }}">Déconnexion</a>
        {% endif %}
    </div>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for msg in messages %}
            <div>{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
</body>
</html>
